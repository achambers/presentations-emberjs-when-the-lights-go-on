#[fit]ember: when the lights go on

###@grandazz
###github.com/achambers

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/tweet-modified.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL3R3ZWV0LW1vZGlmaWVkLnBuZyIsImV4cGlyZXMiOjE0MTE5MzM2NTJ9--3b313bbee535fdc0444a3c95b6b65babe71d6eed)

---

#[fit]how ember saved my life

###@grandazz
###github.com/achambers

---


#[fit]~~how ember saved my life~~

###@grandazz
###github.com/achambers

---

#[fit]ember: when the lights go on

###@grandazz
###github.com/achambers

---

##Wenguins

![fit](http://cdn.visualnews.com/wp-content/uploads/2013/05/photoshopchimera-2.jpg)

---

![fit](http://cdn.visualnews.com/wp-content/uploads/2013/05/photoshopchimera-2.jpg)

---

##Noah update

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/noah.jpg?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL25vYWguanBnIiwiZXhwaXJlcyI6MTQxMjAxNjg4MX0%3D--b24bca6bd92c23551e7acf375773871305de0914)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/noah.jpg?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL25vYWguanBnIiwiZXhwaXJlcyI6MTQxMjAxNjg4MX0%3D--b24bca6bd92c23551e7acf375773871305de0914)

---

#[fit]this is not

#[fit]*an __ember__ is better than everything else*

#[fit]presentation

---

#[fit]browser dev boiled down
####(shamelessley borrowed from @ryanflorence)

###interacting with data stores
###rendering data to ui
###responding to user interaction
###router & urls
###project stuff: file organisation, build tools etc

^the way I see it, browser dev breaks down like this

---

![65%](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/framework-graph.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2ZyYW1ld29yay1ncmFwaC5wbmciLCJleHBpcmVzIjoxNDExOTM1MDIyfQ%3D%3D--bba39fb5825db550b5bad69f043606085a068737)

---

#[fit]our journey with

#[fit]**ember**

^
- this is our journey using a JS MVC framework
- It just happens to be ember

---

#[fit]**lightbulb** moments

^
- share with you some of the lightbulb moments we have had in the journey

---

#[fit]we didn't just jump in

^
- various reasons
- time pressures/deadlines
- lack of confidence and experience in JS

---

#we needed to

#[fit]**validate**

#the switch

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-0.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMC5wbmciLCJleHBpcmVzIjoxNDExOTM1NzExfQ%3D%3D--57b96f8172e38b11566aaf825a4c4ea0d2013fd8)

^
we needed to wait...

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-5.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtNS5wbmciLCJleHBpcmVzIjoxNDExOTM1NzM3fQ%3D%3D--809ace6ad4c95bfb443701e36694ad716d61ee85)

^
...for the lights to go on

^for the moments when we thought 'hell yeh, we need to make the switch'

---

#Service Status

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/02-ss-now.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyLzAyLXNzLW5vdy5wbmciLCJleHBpcmVzIjoxNDExOTM3MzkyfQ%3D%3D--fa29f70e4cd7b07b28be743b08d0a338761c62a9)

___

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/02-ss-now.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyLzAyLXNzLW5vdy5wbmciLCJleHBpcmVzIjoxNDExOTM3MzkyfQ%3D%3D--fa29f70e4cd7b07b28be743b08d0a338761c62a9)

___

```javascript
// app/assets/javascripts/application.js

function bindViewMoreDetailsLinks() {
  $('.more-details').hide();

  $('.view-more').click(function(e) {
    e.preventDefault();

    var viewMoreLink = $(this);
    var moreDetails = viewMoreLink.parents('.issue').find('.more-details');

    if (moreDetails.is(':visible')) {
      moreDetails.hide();
      viewMoreLink.text('More details');
    } else {
      moreDetails.show();
      viewMoreLink.text('Less details');
    }

    viewMoreLink.toggleClass('opened');
  });
}
```

^
- standard Rails app
- we had a small amount of JS

---

```javascript
// app/assets/javascripts/application.js

function toggleElementsForEditors() {
  $.ajax({
    url: '/sessions/current',
    dataType: 'json',
    success: function(data) {
      var loggedInStatus = data.logged_in;
      toggleNewIssueLink(loggedInStatus);
      toggleHeader(loggedInStatus);
      toggleAdditionalLinks(loggedInStatus);
      toggleSidebar(loggedInStatus);
      toggleFooter(loggedInStatus);
      toggleEditIssueLinks(loggedInStatus);
      toggleResolveIssueLinks(loggedInStatus);
    }
  });
}
```

---

```javascript
// app/assets/javascripts/application.js

function toggleHeader(loggedInStatus) {
  $('#skycom-masthead-wrapper').toggleClass('hidden', loggedInStatus);
}

function toggleAdditionalLinks(loggedInStatus) {
  $('.additional-links').toggleClass('hidden', loggedInStatus);
}

function toggleSidebar(loggedInStatus) {
  $('.sidebar').toggleClass('hidden', loggedInStatus);
}

function toggleFooter(loggedInStatus) {
  $('#skycom-footer-wrapper').toggleClass('hidden', loggedInStatus);
}

function toggleEditIssueLinks(loggedInStatus) {
  $('.btn.edit-issue').toggleClass('hidden', !loggedInStatus);
}

function toggleResolveIssueLinks(loggedInStatus) {
  $('.btn.resolve-issue').toggleClass('hidden', !loggedInStatus);
}
```

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-1.jpg?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMS5qcGciLCJleHBpcmVzIjoxNDExOTM3MDMxfQ%3D%3D--01d707388d6e5d9b6c79c981b68c2e15efe87a08)

---

#data based ui manipulation

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-1.jpg?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMS5qcGciLCJleHBpcmVzIjoxNDExOTM3MDMxfQ%3D%3D--01d707388d6e5d9b6c79c981b68c2e15efe87a08)

---

```javascript
// app/views/issues/index.html.haml

function microfilterCheck() {
  var deferred = $.Deferred();

  $.getJSON('/sessions/current', function(json) {
    if (json.logged_in) {
      deferred.resolve()
    } else {
      Hub.runMicrofilterTest()
        .done(function() { deferred.reject();  })
        .fail(function() { deferred.resolve(); });
    }
  });

  return deferred;
}
```

---

```javascript
// app/views/issues/index.html.haml

function restrictionCheck() {
  var deferred = $.Deferred();

  $.getJSON('/customers/current', function(json) {
    if (json.customer.has_debt_restriction) {
      deferred.reject('debt');
    } else if (json.customer.has_high_spend_restriction) {
      deferred.reject('spend');
    } else {
      deferred.resolve();
    }
  }, function() {
    deferred.resolve();
  });

  return deferred;
}
```

---

```javascript
// app/views/issues/index.html.haml

$(function() {
  var microfilterDeferred = microfilterCheck()
  var restrictionDeferred = restrictionCheck()

  $.when(microfilterDeferred, restrictionDeferred).always(function() {
    var args = Array.prototype.slice.call(arguments);

    if (restrictionDeferred.state() == 'rejected') {
      if (args.indexOf('spend') !== -1) {
        $('.high-spend-restriction-alert').removeClass('hidden');
      } else if (args.indexOf('debt') !== -1) {
        $('.debt-restriction-alert').removeClass('hidden');
      }
    } else if (microfilterDeferred.state() == 'rejected') {
      $('.microfilter-alert').removeClass('hidden');
    }

    showIssues();
  });
});
```

---

<br/>

#then the very next commit...

![inline, fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/02-page-controller-commit-message.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyLzAyLXBhZ2UtY29udHJvbGxlci1jb21taXQtbWVzc2FnZS5wbmciLCJleHBpcmVzIjoxNDExOTM3OTI4fQ%3D%3D--65225478fa2e0ebaf713007568321a948381b623)

---

```javascript
// app/views/issues/index.html.haml

$(function() {
  IssuesIndexController.init();
});
```

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-2.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMi5wbmciLCJleHBpcmVzIjoxNDExOTM5MTI2fQ%3D%3D--f01c76379629aaa6c46950eed2ef6714d98471d6)

---

#controllers

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-2.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMi5wbmciLCJleHBpcmVzIjoxNDExOTM5MTI2fQ%3D%3D--f01c76379629aaa6c46950eed2ef6714d98471d6)

---

```javascript
// app/assets/javasctipts/User.js

var User = {
  isAnEditor: function() {
    var deferred = $.Deferred();
    $.ajax({
      dataType: 'json',
      url: '/sessions/current',
      success: function(data) {
        deferred.resolve(data.logged_in);
      },
      error: function() {
        deferred.reject();
      }
    });

    return deferred.promise();
  }
}
```

---

```javascript
// app/assets/javascripts/Diagnostics.js

var Diagnostics = {
  run: function() {
    //run some diagnostics goodness
  }
}

// app/assets/javascripts/CBS.js

var CBS = {
  run: function() {
    //run some monstrosity of a service,
    //return a massive payload we don't need
    //and take forever to do so
  }
}
```

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-3.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMy5wbmciLCJleHBpcmVzIjoxNDExOTM5ODYxfQ%3D%3D--dc02af142a0ed9a885179019893e543f7a49cf93)

---

#models
#&
#interacting with data stores

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-3.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMy5wbmciLCJleHBpcmVzIjoxNDExOTM5ODYxfQ%3D%3D--dc02af142a0ed9a885179019893e543f7a49cf93)

---

```javascript
// app/assets/javascripts/views/IssueView.js

(function() {
  window.IssuesView = {
    render: function() {
      this._showIssues();
      this._toggleStatusMessage();
    }
    // ...snip...
  };
})();

// app/assets/javascripts/views/DebtAlertView.js

(function() {
  window.DebtAlertView = {
    render: function() {
      this._showAlert();
      this._hideProducts();
      this._hideSidebar();
      this._informScreenReader();
    }
    // ...snip...
  };
})();
```

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-4.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtNC5wbmciLCJleHBpcmVzIjoxNDExOTQwMjE2fQ%3D%3D--2cf587c036760eeb56e531bb9568a6e461bcf6ac)

---

#views

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-4.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtNC5wbmciLCJleHBpcmVzIjoxNDExOTQwMjE2fQ%3D%3D--2cf587c036760eeb56e531bb9568a6e461bcf6ac)

---

```handlebars
{!-- app/assets/javascripts/templates/outages.hbs --}}

{{#each outages}}
  <article class="issue">
    <h3>{{description}}</h3>
    <p>
      <span class="label">Date issue was reported</span>
      </br>
      <strong>{{startedOn}}</strong>
    </p>
  </article>
{{/each}}
```

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-5.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtNS5wbmciLCJleHBpcmVzIjoxNDExOTQwNDA3fQ%3D%3D--460ce543e2a74cdbd4234b018a7279f08dfd93d8)

---

#templating

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-5.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtNS5wbmciLCJleHBpcmVzIjoxNDExOTQwNDA3fQ%3D%3D--460ce543e2a74cdbd4234b018a7279f08dfd93d8)

---

#[fit]we started to build our own framework

---

#[fit]we started to build our own framework

#[fit]BADLY

---

> Use a framework, or don't.  Either way, you will.
-- Someone Awesome

^
- a wise person once said
- so we switched to Ember and we started to see the improvements immediately

---

#convention over configuration

```javascript
        this.resource('posts', { path: '/posts' })
```

## PostsRoute
## PostsController
## PostsView
## posts.hbs

---

#no more globals

```javascript
var Diagnostics = {
  run: function() {
    // do stuff
  }
};

window.IssuesIndexController = {
  init: function() {
    // do stuff;
  }
};
```

---

#no more globals

```javascript
ServiceStatus.GoIssuesController = Em.ArrayController.extend({
  status: function() {
    //do stuff
  }.property('hasProblem')
});

ServiceStatus.Outage = DS.Model.extend({
  //attributes here
});

ServiceStatus.SsAccordionComponent = Em.Component.extend({
  collapsed: false,
  //other properties here
});
```

---

#data binding

```javascript
// models/tv_issue.js

ServiceStatus.TvIssue = DS.Model.extend(
  name: DS.attr('string')
);

// controllers.tv_issues.js

ServiceStatus.TvIssuesController = Em.ArrayController.extend({
});
```

```handlebars
<!-- templates/tv_issues.hbs -->
<ul>
  <#each>
  <li>{{name}}</li>
  </each>
</ul>
```

---

#lightbulb moments
#[fit]didn't stop
#there

^
- what we didn't anticipate was the lightbulb moments we'd continue to get

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-6-off.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtNi1vZmYucG5nIiwiZXhwaXJlcyI6MTQxMjAyNDY5MX0%3D--d702f1d9a04e2665864a0a9647ad027a90248e29)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-6-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtNi1vbi5wbmciLCJleHBpcmVzIjoxNDEyMDI0NzMzfQ%3D%3D--9ca4b3635d00715ab393202ae4a8125fb7875961)

---

#leave your assumptions
#at the door

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-6-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtNi1vbi5wbmciLCJleHBpcmVzIjoxNDEyMDI0NzMzfQ%3D%3D--9ca4b3635d00715ab393202ae4a8125fb7875961)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/ember_vs_rails_-_1.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2VtYmVyX3ZzX3JhaWxzXy1fMS5wbmciLCJleHBpcmVzIjoxNDEyMDI3MDk3fQ%3D%3D--d54ec580743807dbd08aa24f3cbb7375f89f871b)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/ember_vs_rails_-_2.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2VtYmVyX3ZzX3JhaWxzXy1fMi5wbmciLCJleHBpcmVzIjoxNDEyMDI3MTA4fQ%3D%3D--8d309a8af9b3f8dcb7f33c0b9662e6c5409f43c0)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/ember_vs_rails_-_3.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2VtYmVyX3ZzX3JhaWxzXy1fMy5wbmciLCJleHBpcmVzIjoxNDEyMDI3MTU5fQ%3D%3D--7f86065da66fcf5ce464a09c7e154106f9cf0ef2)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/ember_vs_rails_-_4.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2VtYmVyX3ZzX3JhaWxzXy1fNC5wbmciLCJleHBpcmVzIjoxNDEyMDI3MTY5fQ%3D%3D--32378c63f122b6c088c3a5479ea26edc575a65f8)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/ember_vs_rails_-_5.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2VtYmVyX3ZzX3JhaWxzXy1fNS5wbmciLCJleHBpcmVzIjoxNDEyMDI3MTc4fQ%3D%3D--502cfa104de70ffe78e24de69e44daafb74a1320)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-7-off.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtNy1vZmYucG5nIiwiZXhwaXJlcyI6MTQxMjAyODAyOX0%3D--abfe51afdacb22fa4beba617eb6a6ce32bc6b2c4)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-7-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtNy1vbi5wbmciLCJleHBpcmVzIjoxNDEyMDI4MDk2fQ%3D%3D--f776019c469239ccaf49b53a708b7d96796169c9)

---

#don't fight the framework

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-7-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtNy1vbi5wbmciLCJleHBpcmVzIjoxNDEyMDI4MDk2fQ%3D%3D--f776019c469239ccaf49b53a708b7d96796169c9)

---

> If something feels harder than it should be, it probably is.  You're probably doing it wrong.
-- Someone Awesome

^
- god knows we've done our fair share of things wrong.
- step back and reassess the situation
- do some more research
- work out what the bug is in your understanding

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-8-off.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtOC1vZmYucG5nIiwiZXhwaXJlcyI6MTQxMjAyODIzMH0%3D--7d9c6c8a09c5aaa4fa38d11afe302802be0d4ce0)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-8-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtOC1vbi5wbmciLCJleHBpcmVzIjoxNDEyMDI4MjczfQ%3D%3D--8f2b70b33d61891d4ec5c6e988f83d78f9d151a9)

---

#ui error logging

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-8-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtOC1vbi5wbmciLCJleHBpcmVzIjoxNDEyMDI4MjczfQ%3D%3D--8f2b70b33d61891d4ec5c6e988f83d78f9d151a9)

---

#ui error logging

```javascript
Ember.onerror = handleError;

Ember.RSVP.on('error', handleError);

function handleError(error) {
  Em.$.ajax('/error', {
    type: 'POST',
    data: { stack: error.stack }
  });
}
```
---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-9-off.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtOS1vZmYucG5nIiwiZXhwaXJlcyI6MTQxMjAzMTY3NX0%3D--40bd5b3c4f03f6448a418f3212b47cf281c1a668)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-9-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtOS1vbi5wbmciLCJleHBpcmVzIjoxNDEyMDMxNjkzfQ%3D%3D--c38f98ae11266bc8b51a06fcf7759ad4ea8b04b6)

---

#build tools

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-9-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtOS1vbi5wbmciLCJleHBpcmVzIjoxNDEyMDMxNjkzfQ%3D%3D--c38f98ae11266bc8b51a06fcf7759ad4ea8b04b6)

---

#[fit]ember-cli

###`npm install -g ember-cli`

---

####ember-cli
#file organisation
####`ember new my-project`

```bash
                                                     - /app
                                                       - /components
                                                       - /controllers
                                                       - /helpers
                                                       - /models
                                                       - /routes
                                                       - /styles
                                                       - /templates
                                                       - /views
                                                       - app.js
                                                       - index.html
                                                       - router.js
                                                     - /config
                                                     - /public
                                                     - /tests
```

^
if this looks familiar to you who use Rails, that is no coindidence

---

####ember-cli
#es6 modules

^
- instead of defining objects on globals
- export objects and import then where required

---

####ember-cli
#testing

^
- test libraries (qunit) and test runner (testem)
- running through multiple browsers headless with phantomjs
- http://localhost:4200/tests

---

####ember-cli
#asset pipeline

^
- uses broccoli to compile sass, coffeescript, ember source

---

####ember-cli
#generators

---

####ember-cli
#http-mock server

^
- a hook in to the development server that mocks out requests

---

####ember-cli
#addons

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-10-off.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMTAtb2ZmLnBuZyIsImV4cGlyZXMiOjE0MTIwMzE3ODd9--b1559c49b80d8aa55e9e5945f700553e2a354f42)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-10-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMTAtb24ucG5nIiwiZXhwaXJlcyI6MTQxMjAzMTgwM30%3D--15647b50a5f4f10596ce1ba545d0d9f5a91c228d)

---

#separation of
#ui and api

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-10-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMTAtb24ucG5nIiwiZXhwaXJlcyI6MTQxMjAzMTgwM30%3D--15647b50a5f4f10596ce1ba545d0d9f5a91c228d)

---

#[fit]clearer separation between data
#[fit]and user interaction

^
- instead of thinking of your app as a way of visualising the data in the database
- you think of your api as a json representation of your data.  And your ui as one of mnay potential clients that can visualise
that data.

---

> think **not** of your api in terms of ui interactions, but in terms of data and relationships

^
- I think it's important to stop seeing your api as a way to get a model into your view
- but to see it as a way to present your domain as data

---

#[fit]your app is a
#[fit]client of your api

^
- and it may not be the only one
- so think of it as such

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-11-off.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMTEtb2ZmLnBuZyIsImV4cGlyZXMiOjE0MTIwMzIxNDB9--6bc0681b68a3f56d0c085d93a98863fbe08090e4)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-11-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMTEtb24ucG5nIiwiZXhwaXJlcyI6MTQxMjAzMjE2M30%3D--299834d6d168ba32828bb9e1fcc9c577bf92a285)

^
- now, these last two things are trying to push the thinking a little bit

---

#deployment

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-11-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMTEtb24ucG5nIiwiZXhwaXJlcyI6MTQxMjAzMjE2M30%3D--299834d6d168ba32828bb9e1fcc9c577bf92a285)

---

#[fit]deploying to heroku

#[fit]and serving from rails

#[fit]is cool and all

---

#[fit]but we've been doing that for

#[fit]a long time

---

#[fit]we can do

#[fit]better

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/deployment-stage1.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2RlcGxveW1lbnQtc3RhZ2UxLnBuZyIsImV4cGlyZXMiOjE0MTIxMTU1OTV9--c251e24cb6ab599d32f6c4eb39af1fefd8c1cd28)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/deployment-stage2.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2RlcGxveW1lbnQtc3RhZ2UyLnBuZyIsImV4cGlyZXMiOjE0MTIxMTU3MzF9--373f1cf519f89288f5f01e2b2ad5fefd6d0f60d2)

^
- this is how most of us probably, currently host our apps.  Even client side ones.
- but this got us thinking

---

#index.html
#app-1234.js
#app-5678.css

^
- now we are using an MVC framework.
- our app is just a set of static files
- and our dev process uses git
- our workflow makes heavy use of feature branches.

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/deployment-stage3.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2RlcGxveW1lbnQtc3RhZ2UzLnBuZyIsImV4cGlyZXMiOjE0MTIxMTU3NTB9--e3fc9103f63cdc61defeceee09a90b5ea81b9d48)

---

#lets push this
#[fit]one step further

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/deployment-stage4.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2RlcGxveW1lbnQtc3RhZ2U0LnBuZyIsImV4cGlyZXMiOjE0MTIxMTU3NjZ9--db9e87e7cf0cc025bcbc7d27111ec7d23bb1b20e)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/deployment-stage5.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2RlcGxveW1lbnQtc3RhZ2U1LnBuZyIsImV4cGlyZXMiOjE0MTIxMTU3ODB9--11fc75c396b198e08a27e198a895dc8235d0d086)

---

#[fit]deployment becomes super quick

---


#just push some static assets to S3

#and push index.html into redis

---

#[fit]not to mention cutting over

^
- just update the key of the index.html to index:current

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-12-off.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMTItb2ZmLnBuZyIsImV4cGlyZXMiOjE0MTIwMzMwMjd9--cdc529a1235ca6514e25a06c7e09eeac657ba658)

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-12-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMTItb24ucG5nIiwiZXhwaXJlcyI6MTQxMjA5NTA3OX0%3D--638cdaabf024a9c6c26b1f24e97f73f4f9a86f62)

---

#pact file testing

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/lightbulbs-12-on.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL2xpZ2h0YnVsYnMtMTItb24ucG5nIiwiZXhwaXJlcyI6MTQxMjA5NTA3OX0%3D--638cdaabf024a9c6c26b1f24e97f73f4f9a86f62)

---

#[fit]how do we test that changes

#[fit]to the api

---

#[fit]how do we test that changes

#[fit]to the api

#[fit]don't break the ui?

---

> pact (_noun_)
> A formal agreement between individuals or parties.
--The Google

---

#[fit]the relationship of the web app consists of:

#[fit]the _consumer_ (ui)

#[fit]the _provider_ (api)

---

#Step 1 - Define the consumer expectations

![inline](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/pact-consumer.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL3BhY3QtY29uc3VtZXIucG5nIiwiZXhwaXJlcyI6MTQxMjExMDAzOH0%3D--11e34ba1d77c45f37619cb48cb1ce367f6d0f283)

---

#Step 2 - Verify expectations on provider

![inline](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/pact-provider.png?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL3BhY3QtcHJvdmlkZXIucG5nIiwiZXhwaXJlcyI6MTQxMjExMDA1NH0%3D--750255f3d072100f7a1ae3d4b2f4160e7a3f6c6c)

^
- this doesn't need to be specific to your app
- MCS could verify against our pact files

---

#[fit]imagine if
#CBS
#[fit]verified their services against our pact files
#[fit]every time they released?

---

![fit](https://raw.githubusercontent.com/achambers/presentations-emberjs-when-the-lights-go-on/master/mind-blown.jpg?token=416724__eyJzY29wZSI6IlJhd0Jsb2I6YWNoYW1iZXJzL3ByZXNlbnRhdGlvbnMtZW1iZXJqcy13aGVuLXRoZS1saWdodHMtZ28tb24vbWFzdGVyL21pbmQtYmxvd24uanBnIiwiZXhwaXJlcyI6MTQxMjExMDA4MH0%3D--84b4c073cd9311cca902e40a88fdda4209db393c)

---

#Thats a wrap

---

##@grandazz

##github.com/achambers

---

#[fit]any questions?

###@grandazz

###github.com/achambers

---

#[fit]thankyou
